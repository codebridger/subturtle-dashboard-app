<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="./wordcloud2.js"></script>
  </head>
  <body>
    <canvas id="wordcloud"></canvas>
  </body>
  <style>
    body {
      padding: 0px;
      margin: 0px;
      background: transparent;
    }
  </style>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const wordsData = urlParams.get("words");
    const backgroundColor = decodeURIComponent(
      urlParams.get("backgroundColor")
    );

    let wordsList = JSON.parse(decodeURIComponent(wordsData));
    wordsList = wordsList.map((word) => {
      const { innerHeight, innerWidth } = window;
      // generate random weight for each word based on the screen width
      const weight = Math.floor((Math.random() * innerWidth) / 10);

      return [word, weight];
    });

    const canvas = document.getElementById("wordcloud");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function getColor() {
      const lightColors = [
        "#e8f964",
        "#9acd83",
        "#ffd3ea",
        "#dcf0ea",
        "#b9d9fb",
        "#b996ec",
      ];

      return lightColors[Math.floor(Math.random() * lightColors.length)];
    }

    WordCloud(document.getElementById("wordcloud"), {
      list: wordsList,
      backgroundColor: getColor(),
    });
  </script>
</html>
